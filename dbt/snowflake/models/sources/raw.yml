version: 2

sources:
  - name: raw
    database: MARKETS
    schema: RAW
    config:
      freshness:
        warn_after: {count: 24, period: hour}
      loaded_at_field: load_ts

    tables:
      - name: raw_stock_data
        description: >
          Raw daily stock prices ingested from market API.
          Append-only table. One row per ticker, date, and load event.

        columns:
          - name: ticker
            description: Stock ticker symbol
            data_tests:
              - not_null

          - name: trading_date
            description: Trading date
            data_tests:
              - not_null

          - name: open
            description: Opening price
            data_tests:
              - not_null

          - name: high
            description: Highest price of the day
            data_tests:
              - not_null

          - name: low
            description: Lowest price of the day
            data_tests:
              - not_null

          - name: close
            description: Closing price
            data_tests:
              - not_null

          - name: volume
            description: Traded volume
            data_tests:
              - not_null

          - name: source_file
            description: Source file or batch identifier
            data_tests:
              - not_null

          - name: load_ts
            description: Timestamp when the record was loaded
            data_tests:
              - not_null
